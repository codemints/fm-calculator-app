const m=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const h of e.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function a(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerpolicy&&(e.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?e.credentials="include":n.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(n){if(n.ep)return;n.ep=!0;const e=a(n);fetch(n.href,e)}};m();const v=()=>{const i=Array.from(document.querySelectorAll('input[name="theme-control"]')),s=document.documentElement,a=localStorage.getItem("data-theme"),l="data-theme",n=c=>window.matchMedia(`(prefers-color-scheme: ${c})`),e=(c,u)=>{s.setAttribute(c,u),localStorage.setItem(c,u),h(u)},h=c=>{i.forEach(u=>{u.dataset.mode===c&&(i.forEach(d=>d.parentNode.classList.remove("active")),u.parentNode.classList.add("active"),u.checked=!0)})},f=(c,u)=>{a===u&&e(c,u)};n("dark").matches&&!a?(console.log(n("dark").matches,a),e(l,"dark"),h("dark")):!n("dark").matches&&!a&&(console.log(n("dark").matches,a),e(l,"light")),f(l,"dark"),f(l,"light"),f(l,"contrast"),i.forEach(c=>{c.addEventListener("change",u=>{const t=u.target.dataset.mode;e(l,t)})}),n("dark").addEventListener("change",()=>{n("dark").matches?e(l,"dark"):e(l,"light")})},g=(i,s,a)=>document.getElementById(i).innerHTML=JSON.stringify(s,null,a);class y{constructor(s){this.store={prevResults:null,prevType:null,prevVal:null,prevFlag:null,results:!1,type:s.type,val:s.val,flag:!1,count:0,idx:0}}setCount(s){this.store.count+=s}setIndex(s){this.store.idx+=s}setFlag(s){this.store.flag=s}setResults(s){this.store.results=s}setPrevResults(s){this.store.prevResults=s}setState(s){this.store.prevType=this.store.type,this.store.prevFlag=this.store.flag,this.store.prevVal=this.store.val,this.store.type=s.target.dataset.type,this.store.val=s.target.value}}const E=i=>{let s="";return i.forEach(a=>s+=a.join("")),new Function("return "+s)()},S=i=>{const s=new Array;return i.forEach((a,l,n)=>{s.push(new Array),l!==n.length-1&&a.forEach((e,h,f)=>{h!==f.length-1&&s[l].push(e)}),l===n.length-1&&a.forEach(e=>{s[l].push(e)})}),i.forEach((a,l,n)=>{if(l!==n.length-1){const e=[];e.push(a[a.length-1]),s.splice(l*2+1,0,e)}}),s},k=i=>{let s="";return i.forEach(a=>{a.forEach(l=>{s+=l})}),s},o=new y({}),A=()=>{const i=document.getElementById("calculations"),s=document.querySelectorAll(".button"),a=["1","2","3","4","5","6","7","8","9","0","."],l=["+","-","*","/"],n=["ESCAPE","BACKSPACE","ENTER","/","*","+"];let e=new Array([]);const h=(f,c)=>{const u=c==="click"?f.target:f.key,d=c==="click"?u.value:u,t=o.store;let r=e[t.idx];if(!(!e.length>1&&n.indexOf(d)!==-1)){if(o.setState(f),o.setCount(1),t.val!==t.prevVal&&(t.count=1),t.idx<0&&(t.idx=0),t.val==="ESCAPE"){t.count=0,t.idx=0,e.length=1,e[0].length=0,o.setResults(!1),o.setPrevResults(null);return}if(t.type==="int"){if(t.results&&t.val==="."){if(t.prevResults%1!==0)return;o.setResults(!1)}if(t.results||t.val==="."&&t.prevVal==="."||t.val==="."&&r.indexOf(".")!==-1||r.at(-1)===")")return;if(t.prevType!=="int"&&l.includes(r.at(-1))&&(o.setFlag(!1),a.forEach(p=>{r.includes(p)&&o.setFlag(!0)}),!t.flag)){r.push(t.val);return}if(l.includes(r.at(-1))){e.push(new Array(d)),o.setIndex(1);return}o.setFlag(!1),r.push(t.val)}if(t.type==="ops"){if(o.setResults(!1),r.at(-1)===".")return;if(t.prevType!=="int"){if(t.count>2)return;{if(e[0]<1&&t.val==="-")return e[0].push(d);const p=parseInt(r.at(-1));if(r.at(-1)===")"&&t.val!=="-"||Number.isInteger(p))return r.push(d);if(r.length<2||t.val!=="-"||r.at(0)==="("&&t.count>1&&!r.includes(")"))return;e.push(new Array("(")),o.setIndex(1),r=e[t.idx],r.push(d);return}}r.at(0)==="("&&!r.includes(")")&&r.push(")"),r.push(t.val);return}if(t.val==="BACKSPACE"){if(e[0].length<1)return;if(r.at(0)==="("&&r.at(1)==="-"&&r.length<3){e.pop(),o.setIndex(-1);return}if(r.length<2&&t.idx!==0){e.pop(),o.setIndex(-1);return}r.at(-1)===")"&&r.pop(),r.pop()}if(t.val==="ENTER"){if(r.at(-1)==="."||(r.indexOf("(")!==-1&&r.indexOf(")")===-1&&r.push(")"),e.length<2||r.length<1))return;const p=Math.round(100*E(S(e)))/100;e.length=1,e[0].length=0,t.idx=0,t.count=0,o.setFlag(!1),o.setResults(!0),o.setPrevResults(p),r=e[t.idx],r.push(p)}}};s.forEach(f=>{f.addEventListener("click",c=>{h(c,"click"),i.value=e.length===1&&e[0]<1?0:k(e),g("dump",e,2),g("state",o.store,2)})})};v();A();
